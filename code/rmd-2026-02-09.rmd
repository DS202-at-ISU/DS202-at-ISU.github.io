---
title: "RMD-S2026-02-09"
author: "Will Ju"
date: "`r Sys.Date()`"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## ggplot2

### check data

```{r}
library(classdata)
str(fbiwide)
```

### ggplot2 syntax

```{r}
ggplot(data = fbiwide, 
       mapping = aes(x = burglary,
                     y = homicide)) + 
  geom_point()
```

### examples

```{r}
mydata <- data.frame(
  x = 1:10
)
mydata$y <- mydata$x * 2

ggplot(mydata, aes(x = x, y = y)) + 
  geom_point() +
  geom_line(color = 'red')
```

-   with `log` scale and other simple transformation

```{r}
ggplot(data = fbiwide, 
       mapping = aes(x = log(burglary),
                     y = log(homicide))) + 
  geom_point()
```

```{r}
ggplot(data = fbiwide, 
       mapping = aes(x = burglary + 10,
                     y = log(homicide) - 50)) + 
  geom_point()
```

-   `ggplot2` basic skeleton

```{r, eval=FALSE}
ggplot() +
  geom_point()
```

### add third aesthetic mapping

-   `color` with categorical variable

```{r}
ggplot(data = fbiwide,
       aes(x = log(burglary),
           y = log(homicide),
           color = state)) +
  geom_point()
```

-   `color` with numeric variable

```{r}
ggplot(aes(x = log(burglary), y = log(motor_vehicle_theft),
           colour=year), data=fbiwide) + geom_point()
```

-   `size` numeric only

```{r}
ggplot(aes(x = log(burglary), y = log(motor_vehicle_theft),
           size=population), data=fbiwide) + geom_point()

```

### more aesthetic mappings

```{r}
mydata <- data.frame(
  x = rnorm(100),
  y = rnorm(100),
  type = c(rep('r', 50), rep('b', 50)),
  size = 1:100
)
# mydata$y <- mydata$x * 2 - 1
```

```{r}
ggplot(mydata,
       aes(x = x, 
           y = y,
           color = type,
           size = size,
           shape = type)) +
  geom_point(alpha = 0.5)
```

```{r}
ggplot(mydata,
       aes(x = x, 
           y = y,
           color = type)) +
  geom_point()
```

```{r}
library(dplyr)
df1 <- data.frame(
  x = seq(-1, 1, 0.1),
  type = 'up'
)
df1$y <- df1$x
df2 <- data.frame(
  x = seq(-1, 1, 0.1),
  type = 'down'
)
df2$y <- -df2$x
df <- rbind(df1, df2)
df <- df %>% mutate(
  sign = if_else(y >= 0, 'positive', 'negative')
)
```

### faceting

```{r}
ggplot(df, aes(x = x, y = y)) +
  geom_point() +
  facet_wrap(~sign)
```

-   faceting can be used as a way of creating conditioning visuals

-   similarly, adding `color` as the third aesthetic mapping can also create conditioning visuals

```{r}
ggplot(df, aes(x = x, y = y, color = sign)) +
  geom_point()
```
